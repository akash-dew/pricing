var gaconnector2=function(){var r,u=!0;function a(e){console.log(e);var t=new XMLHttpRequest;t.open("GET",e,!0),t.send()}function c(){var e=i("_ga"),t=window[window.GoogleAnalyticsObject];if("string"==typeof e&&0<e.length){var n=e.split(".");return n.slice(n.length-2,n.length).join(".")}if(void 0!==t&&void 0!==t.getAll){var o=t.getAll()[0];if(void 0!==o)return o.get("clientId")}}window.localStorage&&window.localStorage.setItem;function d(e){var t=e.split("/")[2],n=/[-\w]+\.(?:[-\w]+\.xn--[-\w]+|[-\w]{2,}|[-\w]+\.[-\w]{2})$/i.exec(t);if("object"==typeof n&&n instanceof Array&&0<n.length)return n[0]}function f(e,t){u?localStorage.setItem(e,t):function(e,t){console.log("setting cookie "+e);var n=new Date;n.setTime(n.getTime()+31536e6);var o="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+o+";domain=."+d(document.location.href)+";path=/"}(e,t)}function i(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){for(var o=t[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}function l(e){return u&&localStorage.getItem(e)||i(e)}function g(e){console.log("deleting value "+e),u&&localStorage.getItem(e)?localStorage.removeItem(e):f(e,"")}function m(e,t){t=void 0===t?document.location.search:t;try{var n=t.match("[?&]"+e+"=([^&]+)");if(n){var o=n[1];return o=o.replace(/\+/g,"%20"),o=decodeURIComponent(o)}return""}catch(e){return""}}!function e(){void 0===c()&&setTimeout(e,500)}();var s=null;function v(e){return e}var h=[];function p(){for(var e={},t=document.cookie.split("; "),n=0;n<t.length;n++){var o=t[n].split("=")[0],r=t[n].split("=").slice(1).join("=");if(13<o.length)if("gaconnector2_"==o.substring(0,13))e[o.replace("gaconnector2_","")]=r}return e}function y(){for(var e=Object.keys(localStorage),t={},n=0;n<e.length;n++){if("gaconnector2_"===e[n].substr(0,13))t[e[n].replace("gaconnector2_","")]=localStorage.getItem(e[n])}return t}var w=["name","email","phone"],_={name:[/^name$/i,/^user.*name$/i],email:[/email/i],phone:[/phone/i]};function b(){var e=u?y():p();for(var t in w){var n=v(w[t]),o=e[n];""!==o&&void 0!==o&&(I(n,o),g("gaconnector2_"+n))}}function I(e,t){if(-1===h.indexOf(e+"="+t)&&""!==s){var n="https://track.gaconnector.com/save_identifier";n+="?gaconnector_id="+s,n+="&account_id="+r,n+="&name="+e;a(n+="&value="+encodeURIComponent(t))}}function S(e,t){var n,o,r,a;o=t,r=v(n=e),a=v(o),-1===h.indexOf(n+"="+o)&&f("gaconnector2_"+r,a),I(e,t)}var n=["color","date","datetime-local","month","number","range","search","time","url","week"];function E(){for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++)e[t].getAttribute("data-gaconnector-tracked")||-1===n.indexOf(e[t].type)&&(e[t].setAttribute("data-gaconnector-tracked",!0),e[t].onchange=function(e){var t;if(t=e.target.value,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t))S("email",e.target.value);else for(var n in _)for(var o=_[n],r=0;r<o.length;r++){var a=o[r];(a.test(e.target.name)||a.test(e.target.id))&&S(n,e.target.value)}})}function R(){return self!==top}function j(){for(var e=document.querySelectorAll("iframe"),t=0;t<e.length;t++){var n=e[t].contentWindow,o={gaconnectorId:s,accountId:r};n.postMessage(o,"*")}}function C(e){"object"==typeof e.data&&void 0!==e.data.gaconnectorId&&(s=e.data.gaconnectorId,r=e.data.accountId,f("gaconnector2_id",s))}function k(e){var t,n=e.dataset.originalHref;return void 0===n&&(e.dataset.originalHref=e.href,n=e.href),t=-1<n.indexOf("?")?"&":"?",e.href=n+t+"gaconnectorId="+s,e.href}function x(){for(var e,t,n=d(document.location.href),o=document.getElementsByTagName("a"),r=0;r<o.length;r++){var a=o[r],c=d(a.href),i=(e=a.href,null!=(t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i))&&2<t.length&&"string"==typeof t[2]&&0<t[2].length?t[2]:null);-1<T.indexOf(c)&&c!==n?k(a):-1<T.indexOf(i)&&i!==n&&k(a)}}var t,o,A,O,T=null,U=(O={isReady:!(A={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"}),readyWait:1,holdReady:function(e){e?O.readyWait++:O.ready(!0)},ready:function(e){if(!0===e&&!--O.readyWait||!0!==e&&!O.isReady){if(!document.body)return setTimeout(O.ready,1);if((O.isReady=!0)!==e&&0<--O.readyWait)return;t.resolveWith(document,[O])}},bindReady:function(){if(!t){if(t=O._Deferred(),"complete"===document.readyState)return setTimeout(O.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",O.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",o),window.attachEvent("onload",O.ready);var e=!1;try{e=null==window.frameElement}catch(e){}document.documentElement.doScroll&&e&&D()}}},_Deferred:function(){var c,n,i,d=[],l={done:function(){if(!i){var e,t,n,o,r,a=arguments;for(c&&(r=c,c=0),e=0,t=a.length;e<t;e++)n=a[e],"array"===(o=O.type(n))?l.done.apply(l,n):"function"===o&&d.push(n);r&&l.resolveWith(r[0],r[1])}return this},resolveWith:function(e,t){if(!i&&!c&&!n){t=t||[],n=1;try{for(;d[0];)d.shift().apply(e,t)}finally{c=[e,t],n=0}}return this},resolve:function(){return l.resolveWith(this,arguments),this},isResolved:function(){return!(!n&&!c)},cancel:function(){return i=1,d=[],this}};return l},type:function(e){return null==e?String(e):A[Object.prototype.toString.call(e)]||"object"}},document.addEventListener?o=function(){document.removeEventListener("DOMContentLoaded",o,!1),O.ready()}:document.attachEvent&&(o=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",o),O.ready())}),function(e){O.bindReady(),O.type(e),t.done(e)});function D(){if(!O.isReady){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(D,1)}O.ready()}}return{track:function(e,t){function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var o;r=e,function(e){var t=!!window.localStorage&&!!window.localStorage.setItem,n=!!e&&"localStorage"===e.storageEngine,o=!e||"string"!=typeof e.storageEngine,r=!!e&&!!e.internalDomains&&!!e.internalDomains.length;u=t&&(n||o&&!r),gaconnector2.useLocalStorage=u;var a,c,i=p(),d=y();if(u)for(var l in i)i[l]&&!d[l]&&f("gaconnector2_"+l,i[l]),c="gaconnector2_"+l,document.cookie=c+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";else for(var l in d)d[l]&&!i[l]&&f("gaconnector2_"+l,d[l]),a="gaconnector2_"+l,localStorage.removeItem(a)}(t),(s=m("gaconnectorId")||l("gaconnectorId")||l("gaconnector2_id")||n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n())!==l("gaconnector2_id")&&f("gaconnector2_id",s),s=s,void 0!==t&&void 0!==t.iframeEnabled&&!0!==t.iframeEnabled||(R()?(console.log("Adding receiveGaConnectorId listener"),window.addEventListener("message",C,!1)):(console.log("Messaging child iframes"),j(),setInterval(j,1e3))),R()||(o="https://track.gaconnector.com/track_pageview",""!=document.location.search?(o+=document.location.search,o+="&"):o+="?",o+="gaconnector_id="+s,o+="&account_id="+r,o+="&referer="+encodeURIComponent(document.referrer),o+="&GA_Client_ID="+c(),o+="&page_url="+encodeURIComponent(window.location.href),o+="&gclid="+encodeURIComponent(m("gclid",window.location.href)),o+="&utm_campaign="+encodeURIComponent(m("utm_campaign",window.location.href)),o+="&utm_term="+encodeURIComponent(m("utm_term",window.location.href)),o+="&utm_content="+encodeURIComponent(m("utm_content",window.location.href)),o+="&utm_source="+encodeURIComponent(m("utm_source",window.location.href)),a(o+="&utm_medium="+encodeURIComponent(m("utm_medium",window.location.href)))),b(),U(function(e){E(),setInterval(E,1e3),void 0!==t&&void 0!==(T=t.internalDomains)&&(x(),setInterval(x,1e3))})},identify:S}}();